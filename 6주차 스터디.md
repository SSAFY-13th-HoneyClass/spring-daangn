# 6주차 스터디

<br>

### 도커? 배포?
#### 배포란?
: 개발한 애플리케이션을 실제 사용자들이 접근할 수 있는 환경 ( 서버 ) 에 올리는 과정

배포 전 : 로컬에서만 실행 가능 ( http://localhost:8080 ) <br>
배포 후 : 인터넷으로 어디서든 접근 가능 ( http://OOOO.com )

<br>

#### 배포를 왜 해야해?
- 내가 개발한 서비스를 다른 사람도 사용 가능하도록
- 내 컴퓨터를 끄더라도 서비스가 계속 실행 되도록

<br>

#### 도커란?
: 애플리케이션을 "컨테이너" 라는 가상 환경에 포장해서 어디서나 똑같이 실행할 수 있게 해주는 도구

<br>

#### 컨테이너란?
: 애플리케이션이 한 컴퓨팅 환경에서 다른 컴퓨팅 환경으로 빠르고 안정적으로 실행될 수 있도록 코드와 모든 종속성을 패키징 하는 표준 소프트웨어 단위


<br>

#### 도커를 왜 사용해야해?
- 환경 통일성 : 개발환경 = 운영환경
- 쉬운 배포 : 한번 도커 "이미지" 만들면 어디서나 실행 가능
- 격리성 : 다른 애플리케이션과 충돌하지 않음
- 확장성

<br>

#### 이미지란?
: 애플리케이션을 실행하기 위한 설계도

<br>

### AWS 서비스들
#### ECR ( Elastic Container Registry )
: 도커 이미지를 저장하고 관리하는 클라우드 창고
- 도커 이미지 안전하게 저장
- 버전 관리 용이
- 권한 관리 용이

<br>

#### API Gateway
: 클라이언트와 서버 사이의 중간 관리자
- 인증/권한 관리 : JWT 토큰 검증
- 요청 제한
- 모니터링
- CORS 설정

<br>

#### App Runner
: 도커 컨테이너를 쉽고 빠르게 배포할 수 있는 서비스
- 간단한 설정
- 자동 스케일링
- HTTPS 자동 설정

<br><br>

### 가상머신? 컨테이너?

#### 가상머신 ( VM )
: 도커 이전의 가상화 기술
- 하이퍼바이저 기반의 가상화 사용
- 논리적으로 분할된 공간에서 VM 이라는 독립된 가상환경을 만들고 호스트 시스템에서 VM에 깔린 게스트 OS를 구동 및 모니터링 하는 역할

<br>

#### 컨테이너 ( Container )
: 무겁고 느린 가상화방식을 해결하기 위해 등장
- 독립된 실행환경 제공 X
- OS의 많은 자원들을 컨테이너 끼리 공유한다 ( 높은 이동성 )
- 빠른 부팅시간
- 컨테이너 개수가 많아져도 디스크 공간을 많이 차지하지 않는다

<br>


<br>

## 도커 실습 해보기


### Docker Image 생성
![alt text](/image/6주차/image-2.png)

<br>

### 컨테이너 실행해서 되는지 확인 
![alt text](/image/6주차/image-4.png)
-> 잘 실행 되는 모습

<br>

### 회원가입 및 로그인 API 테스트
![alt text](/image/6주차/image-5.png)

![alt text](/image/6주차/image-6.png)
-> Good!


<br><br>

### EC2 인스턴스 생성
![alt text](/image/6주차/image.png)

<br>

### RDS 인스턴스 생성
![alt text](/image/6주차/image-1.png)

-> 이제 Local MySQL 을 사용하지 않고, DB를 서버에 올려서 사용할 것!

![alt text](/image/6주차/image-7.png)

![alt text](/image/6주차/image-8.png)

- 성공적으로 연결!

<br>

### 잘 실행이 되려나?

![alt text](/image/6주차/image-10.png)

-> 잘 저장된 모습

<br>


## 이제 남은건 Spring 배포
### 도커 허브에 올리기
![alt text](/image/6주차/image-11.png)

<br>

### EC2에 도커 설치
![alt text](/image/6주차/image-12.png)

<br>

### EC2에서 도커 허브에 올린 내 이미지 받아서 실행하기
![alt text](/image/6주차/image-13.png)

### API 테스트

![alt text](/image/6주차/image-14.png)

-> 성공

<br>

### 배포를 했으면 내 로컬이 아닌 곳에서도 접속이 가능하겠지?

![alt text](/image/6주차/image-15.png)

배포 성공!!

<br><br>

